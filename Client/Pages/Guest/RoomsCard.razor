@using NCMS_wasm.Shared
@*Keyframes by https://animate.style/*@
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
<style type="text/css">

    .bounceIn {
        opacity: 0;
        animation-delay: 0.5s;
        animation-duration: 0.5s;
        animation-name: bounceIn;
        animation-fill-mode: forwards;
    }

    .bounceOut {
        animation-duration: 0.5s;
        animation-name: bounceOut;
        animation-fill-mode: forwards;
    }
</style>


<MudBreakpointProvider>
    @* DEKSTOP VIEW *@
    <MudHidden Breakpoint="Breakpoint.SmAndUp" Invert="true">
        <MudCarousel Class="w-100 px-3 py-5" Style="height:450px;" EnableSwipeGesture="true" TData="object" AutoCycle="false">
            <MudCarouselItem Transition="Transition.Custom" CustomTransitionEnter="bounceIn" CustomTransitionExit="bounceOut">
                <MudStack Row Class="w-100" AlignItems="AlignItems.Center" Justify="Justify.Center" Spacing="2">
                    @foreach( var item in roomInfo.Take(3)){
                        <MudCard Style="width: 25%;">
                            <MudCardMedia Image="@($"images/{item.Thumbnail}")" Height="200" />
                            <MudCardContent>
                                <MudText Typo="Typo.h5">@item.Type.ToString().Replace("_", " ")</MudText>
                                <MudStack Row AlignItems="AlignItems.Baseline" Spacing="2">
                                    @{
                                        var price = item.PricePerNight.ToString("C", new System.Globalization.CultureInfo("en-PH"));
                                        <MudIcon Icon="@Icons.Material.Filled.ReceiptLong" Size="Size.Small" Color="Color.Error" />

                                        <MudText Typo="Typo.subtitle1"> @price per night</MudText>
                                    }
                                </MudStack>
                                <MudStack Row AlignItems="AlignItems.Baseline" Spacing="2">
                                    <MudIcon Icon="@Icons.Material.Filled.People" Size="Size.Small" Color="Color.Info" /> <MudText Typo="Typo.subtitle1"> @item.MaxGuest Person/s</MudText>
                                </MudStack>
                            </MudCardContent>
                            <MudCardActions Class="text-center">
                                <MudButton Variant="Variant.Outlined" Color="Color.Warning" FullWidth>Book Now</MudButton>
                            </MudCardActions>
                        </MudCard>
                        
                    }
                    
                    
                </MudStack>
            </MudCarouselItem>
            <MudCarouselItem Transition="Transition.Custom" CustomTransitionEnter="bounceIn" CustomTransitionExit="bounceOut">
                <MudStack Row Class="w-100" AlignItems="AlignItems.Center" Justify="Justify.Center" Spacing="2">
                    @foreach (var item in roomInfo.Skip(3).Take(2))
                    {
                        <MudCard Style="width: 25%;">
                            <MudCardMedia Image="@($"images/{item.Thumbnail}")" Height="200" />
                            <MudCardContent>
                                <MudText Typo="Typo.h5">@item.Type.ToString().Replace("_", " ")</MudText>
                                <MudStack Row AlignItems="AlignItems.Baseline" Spacing="2">
                                    @{
                                        var price = item.PricePerNight.ToString("C", new System.Globalization.CultureInfo("en-PH"));
                                        <MudIcon Icon="@Icons.Material.Filled.ReceiptLong" Size="Size.Small" Color="Color.Error" />

                                        <MudText Typo="Typo.subtitle1"> @price per night</MudText>
                                    }
                                </MudStack>
                                <MudStack Row AlignItems="AlignItems.Baseline" Spacing="2">
                                    <MudIcon Icon="@Icons.Material.Filled.People" Size="Size.Small" Color="Color.Info" /> <MudText Typo="Typo.subtitle1"> @item.MaxGuest Person/s</MudText>
                                </MudStack>
                            </MudCardContent>
                            <MudCardActions Class="text-center">
                                <MudButton Variant="Variant.Outlined" Color="Color.Warning" FullWidth>Book Now</MudButton>
                            </MudCardActions>
                        </MudCard>

                    }
                </MudStack>
            </MudCarouselItem>
            <MudCarouselItem Transition="Transition.Custom" CustomTransitionEnter="bounceIn" CustomTransitionExit="bounceOut">
                <MudStack Row Class="w-100" AlignItems="AlignItems.Center" Justify="Justify.Center" Spacing="2">
                    @foreach (var item in roomInfo.Skip(5).Take(2))
                    {
                        <MudCard Style="width: 25%;">
                            <MudCardMedia Image="@($"images/{item.Thumbnail}")" Height="200" />
                            <MudCardContent>
                                <MudText Typo="Typo.h5">@item.Type.ToString().Replace("_", " ")</MudText>
                                <MudStack Row AlignItems="AlignItems.Baseline" Spacing="2">
                                    @{
                                        var price = item.PricePerNight.ToString("C", new System.Globalization.CultureInfo("en-PH"));
                                        <MudIcon Icon="@Icons.Material.Filled.ReceiptLong" Size="Size.Small" Color="Color.Error" />

                                        <MudText Typo="Typo.subtitle1"> @price per night</MudText>
                                    }
                                </MudStack>
                                <MudStack Row AlignItems="AlignItems.Baseline" Spacing="2">
                                    <MudIcon Icon="@Icons.Material.Filled.People" Size="Size.Small" Color="Color.Info" /> <MudText Typo="Typo.subtitle1"> @item.MaxGuest Person/s</MudText>
                                </MudStack>
                            </MudCardContent>
                            <MudCardActions Class="text-center">
                                <MudButton Variant="Variant.Outlined" Color="Color.Warning" FullWidth>Book Now</MudButton>
                            </MudCardActions>
                        </MudCard>
                    }
                </MudStack>
            </MudCarouselItem>
        </MudCarousel>
    </MudHidden>
    @* MOBILE VIEW *@
    <MudHidden Breakpoint="Breakpoint.SmAndDown" Invert="true">
        <MudCarousel Style="height:430px;" Class="justify-content-center" ArrowsPosition="Position.Center" EnableSwipeGesture="true" TData="object" AutoCycle="true">           
            @foreach(var item in roomInfo)
            {
                <MudCarouselItem Transition="Transition.Custom" CustomTransitionEnter="bounceIn" CustomTransitionExit="bounceOut">
                    <MudCard Style="">
                        <MudCardMedia Image="@($"images/{item.Thumbnail}")" Height="200" />
                        <MudCardContent>
                            <MudText Typo="Typo.h5">@item.Type.ToString().Replace("_", " ")</MudText>
                            <MudStack Row AlignItems="AlignItems.Baseline" Spacing="2">
                                @{
                                    var price = item.PricePerNight.ToString("C", new System.Globalization.CultureInfo("en-PH"));
                                    <MudIcon Icon="@Icons.Material.Filled.ReceiptLong" Size="Size.Small" Color="Color.Error" />
                                    <MudText Typo="Typo.subtitle1"> @price per night</MudText>
                                }
                            </MudStack>
                            <MudStack Row AlignItems="AlignItems.Baseline" Spacing="2">
                                <MudIcon Icon="@Icons.Material.Filled.People" Size="Size.Small" Color="Color.Info" /> <MudText Typo="Typo.subtitle1"> @item.MaxGuest Person/s</MudText>
                            </MudStack>
                        </MudCardContent>
                        <MudCardActions Class="text-center">
                            <MudButton Variant="Variant.Outlined" Color="Color.Warning" FullWidth>Book Now</MudButton>
                        </MudCardActions>
                    </MudCard>
                </MudCarouselItem>
            }                      
        </MudCarousel>
    </MudHidden>
</MudBreakpointProvider>





@code{
    private List<RoomInfo> roomInfo = new();
    [Inject] IHttpClientFactory httpClientFactory { get; set; }
    private string[] RoomNames = {"Twin Double Room","Double Twin","Deluxe Double","Triple Toom", "Suite", "King Suite", "Superior Queen"};

    protected override async Task OnInitializedAsync()
    {
        roomInfo = new();
        await LoadRoomsList();
        await base.OnInitializedAsync();
    }


    private async Task LoadRoomsList()
    {

        try
        {
            var httpClient = httpClientFactory.CreateClient("Anonymous");
            roomInfo = await httpClient.GetFromJsonAsync<List<RoomInfo>>($"HotelManagement/GetRoomInfo");
        }
        catch (Exception ex)
        {
            // Snackbar.Add($"An error occured: {ex.Message}");
            Console.WriteLine($"Exception Occured: {ex.Message}");
        }

    }
}